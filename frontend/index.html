<!DOCTYPE html>
<html>
<head>
<title>Inito Sense</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<style>

body{
    margin:0;
    background:#050816;
    font-family:'Inter',sans-serif;
    color:white;
}

/* NAV */

.navbar{
    padding:20px 40px;
    display:flex;
    justify-content:space-between;
    border-bottom:1px solid rgba(255,255,255,0.05);
}

.nav-links span{
    margin-left:25px;
    opacity:.6;
    font-size:13px;
}

/* MAIN */

.container{
    max-width:900px;
    margin:50px auto;
    padding:0 20px;
}

.chat-card{
    background:#000000; /* pure black */
    border-radius:14px;
    border:1px solid rgba(255,255,255,0.08);
    overflow:hidden;
}


/* HEADER */

.chat-header{
    padding:22px;
    border-bottom:1px solid rgba(255,255,255,0.05);
    display:flex;
    align-items:center;
}

.avatar{
    width:38px;
    height:38px;
    border-radius:8px;
    display:flex;
    align-items:center;
    justify-content:center;
    margin-right:16px;
    background:transparent; /* remove orange */
}

.logo-avatar img{
    width:100%;
    height:auto;
    object-fit:contain;
}


/* CHAT BODY */

.chat-body{
    height:420px;
    overflow-y:auto;
    padding:30px;
    display:flex;
    flex-direction:column;
    gap:18px;
}

/* Claude Style Message */

.msg{
    max-width:70%;
    padding:18px 20px;
    border-radius:12px;
    line-height:1.7;
    animation:fadeIn .25s ease;
}

.user{
    align-self:flex-end;
    background:#1b2348;
}

.bot{
    align-self:flex-start;
    background:#0a0a0a;
}


/* INPUT */

.input-area{
    display:flex;
    border-top:1px solid rgba(255,255,255,0.05);
}

.input-area input{
    flex:1;
    padding:20px;
    background:transparent;
    border:none;
    color:white;
}

.input-area button{
    width:160px;
    background:#ffffff;
    color:#000000;
    border:none;
    font-weight:600;
    cursor:pointer;
    transition:.25s;
}

.input-area button:hover{
    box-shadow:0 0 15px rgba(255,255,255,0.6);
}
/* Typing dots */

.typing{
    display:flex;
    gap:6px;
}

.typing span{
    width:6px;
    height:6px;
    background:#e6a273;
    border-radius:50%;
    animation:blink 1.2s infinite;
}

.typing span:nth-child(2){animation-delay:.2s}
.typing span:nth-child(3){animation-delay:.4s}

/* Animations */

@keyframes fadeIn{
    from{opacity:0; transform:translateY(5px)}
    to{opacity:1; transform:translateY(0)}
}

@keyframes blink{
    0%,80%,100%{opacity:.2}
    40%{opacity:1}
}

/* MOBILE */

@media(max-width:700px){
    .chat-body{height:60vh}
    .msg{max-width:90%}
}

</style>
</head>

<body>

<div class="navbar">
    <b>Inito Sense</b>
</div>

<div class="container">

<div class="chat-card">

<div class="chat-header">
<div class="avatar logo-avatar">
    <img src="inito-logo.jfif" alt="Inito" />
</div>

<div>
<b>Inito Sense</b><br>
<small style="opacity:.6">Your Helper</small>
</div>
</div>

<div id="chat" class="chat-body">

<div class="msg bot">
Hi — I’m Inito Sense.  
Ask me about your fertility queries.
</div>

</div>

<div class="input-area">
<input id="msg" placeholder="Ask anything..." />
<button onclick="send()">SEND →</button>
</div>

</div>
</div>

<script>

const chat = document.getElementById("chat");

async function send(){

const text = msg.value;
if(!text) return;

// User message
chat.innerHTML += `<div class="msg user">${text}</div>`;
msg.value="";
chat.scrollTop = chat.scrollHeight;

// Typing indicator
const typingDiv = document.createElement("div");
typingDiv.className="msg bot";
typingDiv.innerHTML = `
<div class="typing">
<span></span><span></span><span></span>
</div>`;
chat.appendChild(typingDiv);
chat.scrollTop = chat.scrollHeight;

// Call backend
const response = await fetch("https://inito-sense-assistant-2-0.onrender.com/chat-stream",{
method:"POST",
headers:{'Content-Type':'application/json'},
body:JSON.stringify({message:text})
});

// Remove typing
typingDiv.remove();

// Bot message container
const botMsg = document.createElement("div");
botMsg.className="msg bot";
chat.appendChild(botMsg);

// STREAM START
const reader = response.body.getReader();
const decoder = new TextDecoder();

let fullText = "";

while(true){
const {done,value} = await reader.read();
if(done) break;

fullText += decoder.decode(value);
botMsg.innerHTML = marked.parse(fullText);

chat.scrollTop = chat.scrollHeight;
}

}


</script>

</body>
</html>
